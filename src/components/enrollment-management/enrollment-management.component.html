<div class="p-4 sm:p-6 lg:p-8 bg-white dark:bg-gray-900">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-2xl font-semibold text-gray-800 dark:text-gray-100">
            Gestão de Matrículas
        </h1>
    </div>

    <!-- Tabs -->
    <div class="mb-6 border-b border-gray-200 dark:border-gray-700">
        <nav class="flex gap-8">
            <button (click)="setActiveTab('trilhas')"
                class="flex items-center gap-2 py-3 border-b-2 font-medium text-sm transition-colors"
                [class.border-purple-600]="activeTab() === 'trilhas'"
                [class.text-purple-600]="activeTab() === 'trilhas'"
                [class.border-transparent]="activeTab() !== 'trilhas'" [class.text-gray-500]="activeTab() !== 'trilhas'"
                [class.hover:text-gray-700]="activeTab() !== 'trilhas'">
                <span class="material-symbols-outlined">timeline</span>
                <span>Trilhas</span>
            </button>

            <button (click)="setActiveTab('cursos')"
                class="flex items-center gap-2 py-3 border-b-2 font-medium text-sm transition-colors"
                [class.border-purple-600]="activeTab() === 'cursos'" [class.text-purple-600]="activeTab() === 'cursos'"
                [class.border-transparent]="activeTab() !== 'cursos'" [class.text-gray-500]="activeTab() !== 'cursos'"
                [class.hover:text-gray-700]="activeTab() !== 'cursos'">
                <span class="material-symbols-outlined">rocket_launch</span>
                <span>Cursos</span>
            </button>

            <button (click)="setActiveTab('eventos')"
                class="flex items-center gap-2 py-3 border-b-2 font-medium text-sm transition-colors"
                [class.border-purple-600]="activeTab() === 'eventos'"
                [class.text-purple-600]="activeTab() === 'eventos'"
                [class.border-transparent]="activeTab() !== 'eventos'" [class.text-gray-500]="activeTab() !== 'eventos'"
                [class.hover:text-gray-700]="activeTab() !== 'eventos'">
                <span class="material-symbols-outlined">event</span>
                <span>Eventos</span>
            </button>

            <button (click)="setActiveTab('smartzap')"
                class="flex items-center gap-2 py-3 border-b-2 font-medium text-sm transition-colors"
                [class.border-purple-600]="activeTab() === 'smartzap'"
                [class.text-purple-600]="activeTab() === 'smartzap'"
                [class.border-transparent]="activeTab() !== 'smartzap'"
                [class.text-gray-500]="activeTab() !== 'smartzap'"
                [class.hover:text-gray-700]="activeTab() !== 'smartzap'">
                <span class="material-symbols-outlined">chat</span>
                <span>SmartZap</span>
            </button>
        </nav>
    </div>

    <!-- Toolbar -->
    <div class="flex gap-4 items-center mb-6">
        <button class="p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800">
            <span class="material-symbols-outlined text-gray-600 dark:text-gray-400">filter_list</span>
        </button>

        <div class="relative flex-1 max-w-md">
            <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">search</span>
            <input type="text" [(ngModel)]="searchQuery" placeholder="Pesquisar por..."
                class="w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500">
        </div>
    </div>

    <!-- Table Container -->
    <div class="rounded-lg border border-gray-200 dark:border-gray-700 mb-6">
        @if (activeTab() === 'smartzap') {
        <!-- SmartZap Table (Standard Design System) -->
        <table class="w-full text-left border-collapse">
            <thead class="bg-gray-50 dark:bg-gray-800 sticky top-0 z-10">
                <tr>
                    <th class="py-3 px-4 w-12">
                        <input type="checkbox" class="rounded border-gray-300 dark:border-gray-600">
                    </th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider">
                        Usuário</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider">
                        Curso</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider">
                        Celular</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Início</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Fim</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Perf.</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Msg.</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Status</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-right">
                        Menu</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900">
                @for (item of filteredEnrollments(); track item.id) {
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
                    <td class="py-4 px-4">
                        <input type="checkbox" class="rounded border-gray-300 dark:border-gray-600">
                    </td>
                    <td class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400">{{ item.user }}</td>
                    <td class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400">{{ item.course }}</td>
                    <td class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400">{{ item.phone }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.startDate }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.endDate }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.performance ?
                        item.performance + '%' : '-' }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.messages }}</td>
                    <td class="py-4 px-4 text-center">
                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-bold uppercase"
                            [class.bg-green-100]="item.status === 'completed'"
                            [class.text-green-800]="item.status === 'completed'"
                            [class.bg-red-100]="item.status === 'canceled'"
                            [class.text-red-800]="item.status === 'canceled'"
                            [class.bg-gray-100]="item.status === 'received'"
                            [class.text-gray-800]="item.status === 'received'">
                            <span class="w-1.5 h-1.5 rounded-full mr-1.5"
                                [class.bg-green-500]="item.status === 'completed'"
                                [class.bg-red-500]="item.status === 'canceled'"
                                [class.bg-gray-500]="item.status === 'received'"></span>
                            {{ item.statusLabel }}
                        </span>
                    </td>
                    <td class="py-4 px-4 text-right">
                        <button
                            class="p-1 rounded-full text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            <span class="material-symbols-outlined">more_vert</span>
                        </button>
                    </td>
                </tr>
                }
            </tbody>
        </table>
        } @else if (activeTab() === 'trilhas') {
        <!-- Trilhas Table (No Checkboxes) -->
        <table class="w-full text-left border-collapse">
            <thead class="bg-gray-50 dark:bg-gray-800 sticky top-0 z-10">
                <tr>
                    <th class="py-3 px-4 w-12">
                        <input type="checkbox" class="rounded border-gray-300 dark:border-gray-600">
                    </th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider">
                        Nome</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider">
                        Usuário</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Início</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Fim</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Meta</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Perf.</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Atraso</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Obrig.</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Status</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-right">
                        Menu</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900">
                @for (item of filteredEnrollments(); track item.id) {
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
                    <td class="py-4 px-4">
                        <input type="checkbox" class="rounded border-gray-300 dark:border-gray-600">
                    </td>
                    <td class="py-4 px-4">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded bg-gray-100 dark:bg-gray-700 flex items-center justify-center">
                                <span
                                    class="material-symbols-outlined text-sm text-gray-600 dark:text-gray-400">timeline</span>
                            </div>
                            <span class="text-sm font-medium text-gray-900 dark:text-gray-200">{{ item.name }}</span>
                        </div>
                    </td>
                    <td class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400">{{ item.user }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.startDate }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.endDate }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.goalDate }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.performance ?
                        item.performance + '%' : '-' }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.delay }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.required }}</td>
                    <td class="py-4 px-4 text-center">
                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-bold uppercase"
                            [class.bg-green-100]="item.status === 'finalized'"
                            [class.text-green-800]="item.status === 'finalized'"
                            [class.bg-yellow-100]="item.status === 'overdue'"
                            [class.text-yellow-800]="item.status === 'overdue'"
                            [class.bg-blue-100]="item.status === 'in-progress'"
                            [class.text-blue-800]="item.status === 'in-progress'">
                            <span class="w-1.5 h-1.5 rounded-full mr-1.5"
                                [class.bg-green-500]="item.status === 'finalized'"
                                [class.bg-yellow-500]="item.status === 'overdue'"
                                [class.bg-blue-500]="item.status === 'in-progress'"></span>
                            {{ item.statusLabel }}
                        </span>
                    </td>
                    <td class="py-4 px-4 text-right">
                        <button
                            class="p-1 rounded-full text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            <span class="material-symbols-outlined">more_vert</span>
                        </button>
                    </td>
                </tr>
                }
            </tbody>
        </table>
        } @else {
        <!-- Cursos & Eventos Table (With Checkboxes) -->
        <table class="w-full text-left border-collapse">
            <thead class="bg-gray-50 dark:bg-gray-800 sticky top-0 z-10">
                <tr>
                    <th class="py-3 px-4 w-12">
                        <input type="checkbox" class="rounded border-gray-300 dark:border-gray-600">
                    </th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider">
                        Nome</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider">
                        Usuário</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Início</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Fim</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Meta</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Perf.</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Atraso</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Obrig.</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-center">
                        Status</th>
                    <th
                        class="py-3 px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider text-right">
                        Menu</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900">
                @for (item of filteredEnrollments(); track item.id) {
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
                    <td class="py-4 px-4">
                        <input type="checkbox" class="rounded border-gray-300 dark:border-gray-600">
                    </td>
                    <td class="py-4 px-4">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded bg-gray-100 dark:bg-gray-700 flex items-center justify-center">
                                @if (activeTab() === 'cursos') {
                                <span
                                    class="material-symbols-outlined text-sm text-gray-600 dark:text-gray-400">rocket_launch</span>
                                } @else {
                                <span
                                    class="material-symbols-outlined text-sm text-gray-600 dark:text-gray-400">event</span>
                                }
                            </div>
                            <span class="text-sm font-medium text-gray-900 dark:text-gray-200">{{ item.name }}</span>
                        </div>
                    </td>
                    <td class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400">{{ item.user }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.startDate }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.endDate }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.goalDate }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.performance ?
                        item.performance + '%' : '-' }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.delay }}</td>
                    <td class="py-4 px-4 text-sm text-center text-gray-600 dark:text-gray-400">{{ item.required }}</td>
                    <td class="py-4 px-4 text-center">
                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-bold uppercase"
                            [class.bg-green-100]="item.status === 'finalized'"
                            [class.text-green-800]="item.status === 'finalized'"
                            [class.bg-yellow-100]="item.status === 'overdue' || item.status === 'expired'"
                            [class.text-yellow-800]="item.status === 'overdue' || item.status === 'expired'"
                            [class.bg-blue-100]="item.status === 'enrolled'"
                            [class.text-blue-800]="item.status === 'enrolled'"
                            [class.bg-red-100]="item.status === 'expired'"
                            [class.text-red-800]="item.status === 'expired'">
                            <span class="w-1.5 h-1.5 rounded-full mr-1.5"
                                [class.bg-green-500]="item.status === 'finalized'"
                                [class.bg-yellow-500]="item.status === 'overdue'"
                                [class.bg-blue-500]="item.status === 'enrolled'"
                                [class.bg-red-500]="item.status === 'expired'"></span>
                            {{ item.statusLabel }}
                        </span>
                    </td>
                    <td class="py-4 px-4 text-right">
                        <button
                            class="p-1 rounded-full text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            <span class="material-symbols-outlined">more_vert</span>
                        </button>
                    </td>
                </tr>
                }
            </tbody>
        </table>
        }
    </div>


    <!-- Footer Pagination -->
    <div class="flex flex-col sm:flex-row justify-between items-center text-sm text-gray-600 dark:text-gray-400">
        <div class="flex items-center gap-2 mb-4 sm:mb-0">
            <span>Itens por página</span>
            <select [(ngModel)]="pageSize"
                class="border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 py-1 px-2 focus:ring-1 focus:ring-indigo-500">
                <option [ngValue]="10">10</option>
                <option [ngValue]="25">25</option>
                <option [ngValue]="50">50</option>
            </select>
        </div>

        <div class="flex items-center gap-4">
            <span>1 - {{ filteredEnrollments().length < pageSize() ? filteredEnrollments().length : pageSize() }} de {{
                    totalItems() }}</span>
                    <div class="flex items-center gap-1">
                        <button class="p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50"
                            [disabled]="true">
                            <span class="material-symbols-outlined text-lg">first_page</span>
                        </button>
                        <button class="p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50"
                            [disabled]="true">
                            <span class="material-symbols-outlined text-lg">chevron_left</span>
                        </button>
                        <button class="p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50"
                            [disabled]="true">
                            <span class="material-symbols-outlined text-lg">chevron_right</span>
                        </button>
                        <button class="p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50"
                            [disabled]="true">
                            <span class="material-symbols-outlined text-lg">last_page</span>
                        </button>
                    </div>
        </div>
    </div>
</div>